!function(){var a={_puppets:{},puppets:function(a,b,c){var d;return this._hasPuppet(a)?d=this._getPuppet(a):b&&b.prototype._isPuppet&&(d=new b(a,this,c),this._puppets[a]=d),d},_hasPuppet:function(a){return _.has(this._puppets,a)},_getPuppet:function(a){return this._puppets[a]}};Marionette.Application.prototype=_.extend(Marionette.Application.prototype,a)}(),function(){var a=Marionette.ItemView.extend({modelEvents:{change:"update"},constructor:function(){this._rendered=!1,Marionette.View.prototype.constructor.apply(this,Array.prototype.slice.apply(arguments))},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var a=this.serializeData();a=this.mixinTemplateHelpers(a);var b=this.getTemplate(),c=Marionette.Renderer.render(b,a);return this.$el.html(c),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},updateDOM:function(){var a=$.Deferred();this.updatePromises.push(a),a.resolve()},update:function(){this._isRendered&&(this._shareUpdating(),this.updatePromises=[],this.updateDOM.apply(this,Array.prototype.slice.apply(arguments)),$.when.apply($,this.updatePromises).then(_.bind(this._shareUpdate,this)))},_shareUpdating:function(){this.vent.trigger("view:updating")},_shareUpdate:function(){this.vent.trigger("view:update")}});window.Puppets=window.Puppets||{},window.Puppets.ItemView=a}(),function(){var a=Marionette.Controller.extend({_isPuppet:!0,constructor:function(a,b,c){c=_.extend({},c),this.open=!1,this._isInitialized=!1,this.app=b,this.vent=new Backbone.Wreqr.EventAggregator,this.commands=new Backbone.Wreqr.Commands,this.reqres=new Backbone.Wreqr.RequestResponse,this.moduleName=a,this._configProperties(c),this._configLocalWreqr(c),this._configGlobalWreqr(c),this.region.duration=c.duration?c.duration:500,this.region.transition=c.transition?c.transition:"pop",this.vent.on("region:open",_.bind(this._shareRegionOpen,this)),this.vent.on("region:ready",_.bind(this._shareRegionReady,this)),this.vent.on("region:closing",_.bind(this._shareRegionClosing,this)),this.vent.on("region:close",_.bind(this._shareRegionClose,this)),this.vent.on("view:updating",_.bind(this._shareViewUpdating,this)),this.vent.on("view:update",_.bind(this._shareViewUpdate,this)),Marionette.Controller.prototype.constructor.apply(this,Array.prototype.slice(arguments))},_shareRegionOpen:function(){this.closed=!1,this.closing=!1,this.open=!0,this.app.vent.trigger(this.moduleName+":open")},_shareRegionReady:function(){this.ready=!0,this.closing=!1,this.app.vent.trigger(this.moduleName+":ready")},_shareRegionClosing:function(){this.ready=!1,this.closing=!0,this.app.vent.trigger(this.moduleName+":closing")},_shareRegionClose:function(){this.closed=!0,this.closing=!1,this.open=!1,this.ready=!1,this.app.vent.trigger(this.moduleName+":close")},_shareViewUpdating:function(){this.app.vent.trigger(this.moduleName+":updating")},_shareViewUpdate:function(){this.app.vent.trigger(this.moduleName+":update")},_isStarted:function(){return this._isInitialized},_isOpen:function(){return this.open},_isReady:function(){return this.ready},_isClosing:function(){return this.closing},_isClosed:function(){return this.closed},show:function(){this.region&&this.itemView&&this.region.show(this.itemView)},close:function(){this.region&&this.region.close()},_configGlobalWreqr:function(a){this._configGlobalVent(a),this._configGlobalCommands(a),this._configGlobalRequests(a)},_configGlobalCommands:function(a){var b=this.moduleName,c={};c[b+":show"]="show",c[b+":close"]="close";var d,e=_.extend(c,a.commands);_.each(e,function(a,b){d=a,_.isFunction(d)||(d=this[d]),d&&this.app.commands.setHandler(b,_.bind(d,this))},this)},_configGlobalRequests:function(a){var b=this.moduleName,c={};c[b+":isStarted"]="_isStarted",c[b+":isOpen"]="_isOpen",c[b+":isReady"]="_isOpen",c[b+":isClosing"]="_isOpen",c[b+":isClosed"]="_isClosed";var d,e=_.extend(c,a.commands);_.each(e,function(a,b){d=a,_.isFunction(d)||(d=this[d]),d&&this.app.reqres.setHandler(b,_.bind(d,this))},this)},_configGlobalVent:function(a){var b,c=_.extend({},a.events);_.each(c,function(a,c){b=a,_.isFunction(b)||(b=this[b]),b&&this.app.vent.on(c,_.bind(b,this))},this)},_configProperties:function(a){var b=["model","region","regionManager","view","itemView","collectionView","compositeView","controller"];_.each(b,function(b){a[b]&&(this[b]=a[b])},this)},_configLocalWreqr:function(a){var b=["region","regionManager","view","itemView","collectionView","compositeView","controller"],c={vent:this.vent,commands:this.commands,reqres:this.commands};_.each(b,function(b){(a[b]||this[b])&&(this[b]=_.extend(this[b],a[b],c))},this)}});window.Puppets=window.Puppets||{},window.Puppets.Puppet=a}(),function(){var a=Marionette.Region.extend({constructor:function(){Marionette.Region.prototype.constructor.apply(this,Array.prototype.slice(arguments))},_trigger:function(a){this.vent.trigger("region:"+a)},open:function(a){a.delegateEvents(),"fade"===this.transition?this.slide(this.$el,"in",a):"slide"===this.transition?this.fade(this.$el,"in",a):this.pop(this.$el,"in",a)},closeView:function(a){a.close?a.close():a.remove&&a.remove(),this._trigger("close"),Marionette.triggerMethod.call(this,"close"),delete this.currentView},slide:function(a,b,c){var d=this;"in"===b?(d._trigger("open"),a.hide(),a.html(c.el),a.slideDown(d.duration,function(){d._trigger("ready")})):(d._trigger("closing"),a.slideUp(d.duration,function(){_.bind(d.closeView,d,c)()}))},fade:function(a,b,c){var d=this;if("in"===b){a.hide(),a.html(c.el);var d=this;d._trigger("open"),a.fadeIn(d.duration,function(){d._trigger("ready")})}else d._trigger("closing"),a.fadeOut(d.duration,function(){_.bind(d.closeView,d,c)()})},pop:function(a,b,c){"in"===b?(this._trigger("open"),a.empty().append(c.el),this._trigger("ready")):(this._trigger("closing"),a.empty(),_.bind(this.closeView,this,c)())},close:function(){var a=this.currentView;a&&!a.isClosed&&("fade"===this.transition?this.slide(this.$el,"out",a):"slide"===this.transition?this.fade(this.$el,"out",a):this.pop(this.$el,"out",a))}});window.Puppets=window.Puppets||{},window.Puppets.Region=a}();